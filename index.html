import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js";
import { getFirestore, collection, addDoc, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-firestore.js";

// Configuración de Firebase
const firebaseConfig = {
    apiKey: "AIzaSyBYF_Zg6QbRueDviqs597xpG7IwZ6bMVU4",
    authDomain: "twittee-7ce7e.firebaseapp.com",
    projectId: "twittee-7ce7e",
    storageBucket: "twittee-7ce7e.appspot.com",
    messagingSenderId: "546847253540",
    appId: "1:546847253540:web:a8c99cbed4f7efe714e4b1",
    measurementId: "G-BHKCSD3W7X"
};

// Inicializar Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Función para publicar tweet
async function postTweet() {
    const username = document.getElementById('username').value;
    const text = document.getElementById('tweet').value;
    if (username && text) {
        await addDoc(collection(db, "tweets"), {
            username,
            text,
            time: Date.now()
        });
        document.getElementById('tweet').value = "";
    }
}

// Mostrar tweets en tiempo real
const q = query(collection(db, "tweets"), orderBy("time", "desc"));
onSnapshot(q, (snapshot) => {
    document.getElementById('tweets').innerHTML = snapshot.docs.map(doc =>
        `<div class="tweet"><strong>${doc.data().username}</strong>: ${doc.data().text}</div>`
    ).join('');
});